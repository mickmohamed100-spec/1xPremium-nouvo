<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1XBET Premium - Activation de Compte</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    
    <style>
        :root {
            --primary-blue: #1a237e;
            --light-blue: #03a9f4;
            --gray-bg: #f5f5f5;
            --dark-gray: #424242;
            --white: #ffffff;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            
            /* Variables pour le thème sombre */
            --bg-color: #f5f5f5;
            --text-color: #333;
            --card-bg: rgba(255, 255, 255, 0.1);
            --card-border: rgba(255, 255, 255, 0.2);
        }

        /* Thème sombre */
        [data-theme="dark"] {
            --bg-color: #121212;
            --text-color: #f5f5f5;
            --card-bg: rgba(30, 30, 30, 0.8);
            --card-border: rgba(100, 100, 100, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--bg-color);
            color: var(--text-color);
            min-height: 100vh;
            overflow-x: hidden;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Page d'avertissement */
        .warning-page {
            background: linear-gradient(135deg, #1a237e 0%, #283593 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px 20px;
            text-align: center;
            animation: fadeIn 1s ease;
        }

        .warning-content {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            max-width: 800px;
            width: 100%;
            box-shadow: var(--shadow);
            border: 1px solid var(--glass-border);
            animation: slideUp 1s ease;
        }

        .warning-header {
            margin-bottom: 30px;
            border-bottom: 2px solid var(--light-blue);
            padding-bottom: 20px;
        }

        .warning-header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--light-blue);
        }

        .warning-body {
            text-align: left;
            margin-bottom: 30px;
        }

        .warning-section {
            margin-bottom: 25px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border-left: 4px solid var(--light-blue);
        }

        .warning-section h3 {
            margin-bottom: 10px;
            color: var(--light-blue);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .warning-options {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-accept {
            background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }

        .btn-decline {
            background: linear-gradient(135deg, #f44336 0%, #c62828 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(244, 67, 54, 0.4);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        /* Page de connexion */
        .login-page {
            background: var(--bg-color);
            min-height: 100vh;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px 20px;
            animation: fadeIn 1s ease;
        }

        .login-container {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 100%;
            box-shadow: var(--shadow);
            border: 1px solid var(--card-border);
            animation: slideUp 1s ease;
        }

        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .logo {
            font-size: 3rem;
            font-weight: 900;
            margin-bottom: 10px;
            transform: skew(-10deg);
        }

        .logo-1x {
            color: var(--white);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .logo-bet {
            color: var(--light-blue);
        }

        .logo-premium {
            color: var(--light-blue);
            font-size: 2.5rem;
        }

        .login-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            font-weight: 600;
            color: var(--text-color);
        }

        .form-group input {
            padding: 15px;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.7);
            font-size: 1rem;
            transition: all 0.3s ease;
            color: #333;
        }

        .form-group input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 0 2px var(--light-blue);
        }

        .btn-login {
            background: linear-gradient(135deg, var(--primary-blue) 0%, #303f9f 100%);
            color: white;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .btn-login:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(26, 35, 126, 0.4);
        }

        .login-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .switch-auth-mode {
            background: none;
            border: none;
            color: var(--primary-blue);
            cursor: pointer;
            text-decoration: underline;
            font-size: 0.9rem;
        }

        /* Tableau de bord */
        .dashboard {
            background: var(--bg-color);
            min-height: 100vh;
            padding: 20px;
            animation: fadeIn 1s ease;
            display: none;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--card-border);
        }

        /* Logo 1XPREMIUM réduit pour plus d'espace */
        .dashboard-logo {
            font-size: 2rem;
            font-weight: 900;
            transform: skew(-10deg);
            color: var(--primary-blue);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 60px; /* Espacement augmenté entre le logo et l'icône utilisateur */
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--light-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
            cursor: pointer;
            overflow: hidden;
            position: relative;
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .user-details h3 {
            color: var(--text-color);
            margin-bottom: 8px;
            font-size: 1.2rem;
        }

        .user-details p {
            color: var(--text-color);
            font-size: 0.9rem;
        }

        .logout-btn {
            background: var(--primary-blue);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            margin-left: 15px;
        }

        .dashboard-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }

        .dashboard-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--card-border);
            margin-bottom: 30px;
            animation: slideUp 0.8s ease;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--card-border);
            padding-bottom: 15px;
        }

        .card-header h2 {
            color: var(--primary-blue);
            font-size: 1.5rem;
        }

        .balance-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0;
        }

        .balance {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-blue);
            text-align: center;
        }

        /* AMÉLIORATION : Conteneur pour les boutons CASHVIP, Historique et Profil */
        .balance-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn-cashvip {
            background: linear-gradient(135deg, #9c27b0 0%, #6a1b9a 100%);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
            min-width: 120px;
            justify-content: center;
        }

        .btn-history {
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
            min-width: 120px;
            justify-content: center;
        }

        .btn-profile {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
            min-width: 120px;
            justify-content: center;
        }

        .btn-cashvip:hover, .btn-history:hover, .btn-profile:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .account-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .info-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .info-item h4 {
            color: var(--text-color);
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .info-item p {
            color: var(--primary-blue);
            font-weight: 600;
        }

        .chart-container {
            height: 300px;
            margin-top: 20px;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .btn-action {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-deposit {
            background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%);
            color: white;
        }

        .btn-withdraw {
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
            color: white;
        }

        .btn-activate {
            background: linear-gradient(135deg, var(--primary-blue) 0%, #303f9f 100%);
            color: white;
            width: 100%;
        }

        /* Section Promotions VIP */
        .promotions-section {
            margin-top: 30px;
        }

        .promotions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .promotion-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .promotion-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.25);
        }

        .promotion-card h4 {
            color: var(--light-blue);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .promotion-card p {
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .promotion-api {
            font-family: monospace;
            background: rgba(0, 0, 0, 0.2);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            word-break: break-all;
        }

        /* Page de formulaire d'activation - AJOUT DU CHAMP GMAIL */
        .activation-form-page {
            background: var(--bg-color);
            min-height: 100vh;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px 20px;
            animation: fadeIn 1s ease;
        }

        .activation-form-container {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            max-width: 800px;
            width: 100%;
            box-shadow: var(--shadow);
            border: 1px solid var(--card-border);
            animation: slideUp 1s ease;
        }

        .activation-form-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .activation-form-header h1 {
            color: var(--primary-blue);
            margin-bottom: 10px;
        }

        .activation-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .file-upload {
            border: 2px dashed var(--light-blue);
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload:hover {
            background: rgba(3, 169, 244, 0.1);
        }

        .file-upload i {
            font-size: 3rem;
            color: var(--light-blue);
            margin-bottom: 15px;
        }

        .file-upload p {
            color: var(--text-color);
            margin-bottom: 10px;
        }

        .file-upload input {
            display: none;
        }

        .btn-validate {
            background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%);
            color: white;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .btn-validate:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }

        /* Popup d'information OSJL */
        .osjl-popup {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            animation: fadeIn 0.5s ease;
        }

        .osjl-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 700px;
            width: 90%;
            max-height: 80vh;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.5);
            border: 1px solid #e0e0e0;
            animation: slideUp 0.5s ease;
            color: #333;
            display: flex;
            flex-direction: column;
        }

        .osjl-header {
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 15px;
        }

        .osjl-header h2 {
            color: var(--primary-blue);
            font-size: 2rem;
        }

        .osjl-body {
            flex: 1;
            overflow-y: auto;
            padding-right: 10px;
            line-height: 1.6;
            margin-bottom: 25px;
        }

        .osjl-body p {
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .osjl-footer {
            text-align: center;
        }

        .btn-accept-osjl {
            background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-accept-osjl:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }

        /* Page CASHVIP avec sélection de niveau */
        .cashvip-page {
            background: var(--bg-color);
            min-height: 100vh;
            padding: 20px;
            animation: fadeIn 1s ease;
            display: none;
        }

        .cashvip-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            box-shadow: var(--shadow);
            border: 1px solid var(--card-border);
        }

        .cashvip-header h1 {
            color: var(--primary-blue);
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .cashvip-header p {
            color: var(--text-color);
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .levels-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .level-card {
            background: white;
            border-radius: 15px;
            padding: 30px 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 3px solid transparent;
        }

        .level-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .level-card.selected {
            border-color: var(--light-blue);
            background: rgba(3, 169, 244, 0.05);
        }

        .level-icon-large {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin: 0 auto 20px;
        }

        .level-card h3 {
            color: var(--primary-blue);
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .level-price {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 10px;
        }

        .level-description {
            color: var(--text-color);
            margin-bottom: 20px;
            font-size: 0.9rem;
        }

        .level-benefits {
            list-style: none;
            margin-bottom: 20px;
            text-align: left;
        }

        .level-benefits li {
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .level-benefits i {
            color: #4caf50;
        }

        .btn-select-level {
            background: linear-gradient(135deg, var(--primary-blue) 0%, #303f9f 100%);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .btn-select-level:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(26, 35, 126, 0.4);
        }

        /* Page de dépôt avec niveau présélectionné */
        .deposit-page {
            background: var(--bg-color);
            min-height: 100vh;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px 20px;
            animation: fadeIn 1s ease;
        }

        .deposit-container {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            box-shadow: var(--shadow);
            border: 1px solid var(--card-border);
            animation: slideUp 1s ease;
        }

        .deposit-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .deposit-header h1 {
            color: var(--primary-blue);
            margin-bottom: 10px;
        }

        .selected-level-info {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .selected-level-info h3 {
            color: var(--primary-blue);
            margin-bottom: 5px;
        }

        .selected-level-info .level-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-blue);
        }

        .deposit-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .conversion-info {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin: 10px 0;
        }

        .conversion-info p {
            font-weight: 600;
            color: var(--primary-blue);
        }

        .payment-methods {
            display: flex;
            gap: 15px;
            margin: 15px 0;
        }

        .payment-method {
            flex: 1;
            padding: 15px;
            border: 2px solid transparent;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.3);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-method.selected {
            border-color: var(--light-blue);
            background: rgba(3, 169, 244, 0.1);
        }

        .payment-method i {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--primary-blue);
        }

        .btn-deposit-submit {
            background: linear-gradient(135deg, var(--primary-blue) 0%, #303f9f 100%);
            color: white;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .btn-deposit-submit:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(26, 35, 126, 0.4);
        }

        /* Amélioration de la sélection de pays */
        .country-select-wrapper {
            position: relative;
        }

        .country-select {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.7);
            font-size: 1rem;
            appearance: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .country-select:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 0 2px var(--light-blue);
        }

        .country-select-wrapper::after {
            content: '\f078';
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            position: absolute;
            top: 50%;
            right: 15px;
            transform: translateY(-50%);
            pointer-events: none;
            color: var(--dark-gray);
        }

        /* Popup de confirmation de paiement */
        .payment-confirmation-popup {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            animation: fadeIn 0.5s ease;
        }

        .payment-confirmation-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.5);
            border: 1px solid #e0e0e0;
            text-align: center;
            animation: pulse 2s infinite, slideUp 0.5s ease;
            color: #333;
        }

        .payment-confirmation-content h2 {
            color: var(--primary-blue);
            margin-bottom: 20px;
            font-size: 2rem;
        }

        .payment-confirmation-content p {
            margin-bottom: 25px;
            line-height: 1.6;
            font-size: 1.1rem;
            color: #424242;
        }

        .countdown-timer {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin: 20px 0;
            animation: pulse 1s infinite;
        }

        .phone-animation {
            font-size: 4rem;
            margin: 20px 0;
            animation: bounce 2s infinite;
            color: var(--primary-blue);
        }

        /* Popup de patienter pour email */
        .waiting-email-popup {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            animation: fadeIn 0.5s ease;
        }

        .waiting-email-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.5);
            border: 1px solid #e0e0e0;
            text-align: center;
            animation: slideUp 0.5s ease;
            color: #333;
        }

        .waiting-email-content h2 {
            color: var(--primary-blue);
            margin-bottom: 20px;
            font-size: 2rem;
        }

        .waiting-email-content p {
            margin-bottom: 25px;
            line-height: 1.6;
            font-size: 1.1rem;
            color: #424242;
        }

        .email-animation {
            font-size: 4rem;
            margin: 20px 0;
            animation: bounce 2s infinite;
            color: var(--primary-blue);
        }

        /* Page Historique */
        .history-page {
            background: var(--bg-color);
            min-height: 100vh;
            padding: 20px;
            animation: fadeIn 1s ease;
            display: none;
        }

        .history-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            box-shadow: var(--shadow);
            border: 1px solid var(--card-border);
        }

        .history-header h1 {
            color: var(--primary-blue);
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .history-header p {
            color: var(--text-color);
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .transaction-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #4caf50;
        }

        .transaction-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .transaction-amount {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-blue);
        }

        .transaction-status {
            background: #4caf50;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .transaction-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        .detail-item {
            display: flex;
            flex-direction: column;
        }

        .detail-label {
            font-size: 0.9rem;
            color: var(--text-color);
            margin-bottom: 5px;
        }

        .detail-value {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-blue);
        }

        /* Page Profil */
        .profile-page {
            background: var(--bg-color);
            min-height: 100vh;
            padding: 20px;
            animation: fadeIn 1s ease;
            display: none;
        }

        .profile-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            box-shadow: var(--shadow);
            border: 1px solid var(--card-border);
        }

        .profile-header h1 {
            color: var(--primary-blue);
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .profile-header p {
            color: var(--text-color);
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .profile-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
        }

        .profile-card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--card-border);
            margin-bottom: 30px;
            animation: slideUp 0.8s ease;
        }

        .profile-avatar {
            text-align: center;
            margin-bottom: 20px;
            position: relative;
        }

        .profile-avatar img {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 4px solid var(--light-blue);
            object-fit: cover;
        }

        .profile-avatar-edit {
            position: absolute;
            bottom: 5px;
            right: 5px;
            background: var(--light-blue);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .profile-avatar-edit:hover {
            transform: scale(1.1);
            background: var(--primary-blue);
        }

        .profile-details {
            margin-top: 20px;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .detail-label {
            font-weight: 600;
            color: var(--text-color);
        }

        .detail-value {
            color: var(--primary-blue);
            font-weight: 600;
        }

        /* Formulaire d'édition du profil */
        .profile-edit-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .profile-edit-form .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .profile-edit-form .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .profile-edit-form label {
            font-weight: 600;
            color: var(--text-color);
        }

        .profile-edit-form input {
            padding: 15px;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.7);
            font-size: 1rem;
            transition: all 0.3s ease;
            color: #333;
        }

        .profile-edit-form input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 0 2px var(--light-blue);
        }

        .btn-save-profile {
            background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%);
            color: white;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .btn-save-profile:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }

        .btn-cancel-edit {
            background: linear-gradient(135deg, #f44336 0%, #c62828 100%);
            color: white;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .btn-cancel-edit:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(244, 67, 54, 0.4);
        }

        /* Popup des conditions générales */
        .terms-popup {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            animation: fadeIn 0.5s ease;
        }

        .terms-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 800px;
            width: 90%;
            max-height: 80vh;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.5);
            border: 1px solid #e0e0e0;
            animation: slideUp 0.5s ease;
            color: #333;
            display: flex;
            flex-direction: column;
        }

        .terms-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 15px;
        }

        .terms-header h2 {
            color: var(--primary-blue);
            font-size: 1.8rem;
        }

        .close-terms {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--dark-gray);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-terms:hover {
            color: var(--primary-blue);
            transform: scale(1.1);
        }

        .terms-body {
            flex: 1;
            overflow-y: auto;
            padding-right: 10px;
            line-height: 1.6;
        }

        .terms-body h3 {
            color: var(--primary-blue);
            margin: 20px 0 10px;
            font-size: 1.3rem;
        }

        .terms-body p {
            margin-bottom: 15px;
        }

        .terms-body ul {
            margin-bottom: 15px;
            padding-left: 20px;
        }

        .terms-body li {
            margin-bottom: 8px;
        }

        /* Popup d'erreur de connexion */
        .error-popup {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            animation: fadeIn 0.5s ease;
        }

        .error-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.5);
            border: 1px solid #e0e0e0;
            text-align: center;
            animation: slideUp 0.5s ease;
            color: #333;
        }

        .error-content h2 {
            color: #e74c3c;
            margin-bottom: 20px;
            font-size: 2rem;
        }

        .error-content p {
            margin-bottom: 25px;
            line-height: 1.6;
            font-size: 1.1rem;
            color: #424242;
        }

        .error-animation {
            font-size: 4rem;
            margin: 20px 0;
            animation: shake 0.5s ease;
            color: #e74c3c;
        }

        /* Popup de réinitialisation de mot de passe */
        .reset-password-popup {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            animation: fadeIn 0.5s ease;
        }

        .reset-password-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.5);
            border: 1px solid #e0e0e0;
            animation: slideUp 0.5s ease;
            color: #333;
        }

        .reset-password-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 15px;
        }

        .reset-password-header h2 {
            color: var(--primary-blue);
            font-size: 1.8rem;
        }

        .close-reset-password {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--dark-gray);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-reset-password:hover {
            color: var(--primary-blue);
            transform: scale(1.1);
        }

        .reset-password-body {
            margin-bottom: 25px;
        }

        .reset-password-body p {
            margin-bottom: 20px;
            line-height: 1.6;
            color: #424242;
        }

        .btn-reset-password {
            background: linear-gradient(135deg, var(--primary-blue) 0%, #303f9f 100%);
            color: white;
            padding: 15px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-reset-password:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(26, 35, 126, 0.4);
        }

        .btn-reset-password:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .success-message {
            color: #4caf50;
            background: rgba(76, 175, 80, 0.1);
            padding: 10px;
            border-radius: 5px;
            border-left: 4px solid #4caf50;
        }

        .error-message {
            color: #e74c3c;
            background: rgba(231, 76, 60, 0.1);
            padding: 10px;
            border-radius: 5px;
            border-left: 4px solid #e74c3c;
        }

        /* NOTIFICATIONS PERSONNALISÉES */
        .notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 3000;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 400px;
        }

        .notification {
            padding: 15px 20px;
            border-radius: 10px;
            color: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 15px;
            animation: slideInRight 0.3s ease;
            transition: all 0.3s ease;
        }

        .notification.success {
            background: linear-gradient(135deg, #4caf50 0%, #2e7d32 100%);
            border-left: 5px solid #2e7d32;
        }

        .notification.error {
            background: linear-gradient(135deg, #f44336 0%, #c62828 100%);
            border-left: 5px solid #c62828;
        }

        .notification.hiding {
            animation: slideOutRight 0.3s ease;
            opacity: 0;
        }

        .notification-icon {
            font-size: 1.5rem;
        }

        .notification-message {
            flex: 1;
        }

        .notification-close {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.2rem;
        }

        /* SQUELETTES DE CHARGEMENT */
        .skeleton {
            background: linear-gradient(90deg, #e0e0e0 25%, #f5f5f5 50%, #e0e0e0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: 4px;
        }

        .skeleton-text {
            height: 1rem;
            margin-bottom: 0.5rem;
        }

        .skeleton-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
        }

        .skeleton-balance {
            height: 2.5rem;
            width: 150px;
            margin: 0 auto;
        }

        /* VALIDATION DE FORMULAIRE */
        .error-field {
            border: 2px solid #f44336 !important;
        }

        .error-text {
            color: #f44336;
            font-size: 0.8rem;
            margin-top: 5px;
            display: none;
        }

        /* INTERRUPTEUR DE THÈME */
        .theme-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            background: var(--primary-blue);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
        }

        /* SECTION ANNONCES LIVE */
        .live-announcements {
            margin-top: 30px;
        }

        .announcement-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid var(--light-blue);
            transition: all 0.3s ease;
        }

        .announcement-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .announcement-title {
            color: var(--light-blue);
            margin-bottom: 10px;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .announcement-date {
            color: var(--text-color);
            font-size: 0.8rem;
            opacity: 0.7;
            margin-top: 10px;
        }

        @keyframes shake {
            0%, 100% {transform: translateX(0);}
            10%, 30%, 50%, 70%, 90% {transform: translateX(-5px);}
            20%, 40%, 60%, 80% {transform: translateX(5px);}
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        @keyframes loading {
            0% {
                background-position: 200% 0;
            }
            100% {
                background-position: -200% 0;
            }
        }

        /* Scrollbar personnalisée pour le popup des conditions */
        .terms-body::-webkit-scrollbar,
        .osjl-body::-webkit-scrollbar {
            width: 8px;
        }

        .terms-body::-webkit-scrollbar-track,
        .osjl-body::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .terms-body::-webkit-scrollbar-thumb,
        .osjl-body::-webkit-scrollbar-thumb {
            background: var(--light-blue);
            border-radius: 10px;
        }

        .terms-body::-webkit-scrollbar-thumb:hover,
        .osjl-body::-webkit-scrollbar-thumb:hover {
            background: var(--primary-blue);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(30px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .dashboard-content {
                grid-template-columns: 1fr;
            }
            
            .account-info {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .warning-options {
                flex-direction: column;
            }
            
            .popup-buttons {
                flex-direction: column;
            }
            
            .payment-methods {
                flex-direction: column;
            }
            
            .promotions-grid {
                grid-template-columns: 1fr;
            }
            
            .player-status {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .levels-row {
                overflow-x: auto;
                padding-bottom: 10px;
            }
            
            .level-icon {
                flex-shrink: 0;
                margin: 0 5px;
            }
            
            .cashback-buttons {
                flex-direction: column;
            }
            
            .levels-table {
                display: block;
                overflow-x: auto;
            }
            
            .balance-container {
                flex-direction: column;
                gap: 15px;
            }
            
            .balance-buttons {
                flex-direction: column;
            }
            
            .dashboard-logo {
                font-size: 1.8rem;
            }
            
            .transaction-details {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .levels-selection {
                grid-template-columns: 1fr;
            }
            
            .profile-content {
                grid-template-columns: 1fr;
            }
            
            .profile-edit-form .form-row {
                grid-template-columns: 1fr;
            }
            
            .login-options {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <!-- Container pour les notifications -->
    <div id="notification-container" class="notification-container"></div>

    <!-- Interrupteur de thème -->
    <div id="theme-toggle" class="theme-toggle">
        <i class="fas fa-moon"></i>
    </div>

    <!-- Page d'avertissement -->
    <div id="warning-page" class="warning-page">
        <div class="warning-content">
            <div class="warning-header">
                <h1><i class="fas fa-exclamation-triangle"></i> AVERTISSEMENT – ACTIVATION DE COMPTE 1XBET PREMIUM</h1>
            </div>
            <div class="warning-body">
                <div class="warning-section">
                    <p>Ce message concerne l'activation de votre compte 1XBET Premium, réservé exclusivement aux abonnés VIP.</p>
                    <p>Ce compte vous donne accès à des bonus jusqu'à 300 % sur vos validations, sous réserve d'une activation conforme.</p>
                </div>
                
                <div class="warning-section">
                    <h3><i class="far fa-clock"></i> Délai technique :</h3>
                    <p>Votre compte sera activé à 18h précises, après le traitement automatique. Aucun retard ou modification ne sera accepté.</p>
                </div>
                
                <div class="warning-section">
                    <h3><i class="fas fa-hourglass-half"></i> Temps imparti : 5 minutes MAXIMUM</h3>
                    <p>Vous disposez de 5 minutes strictes pour remplir le formulaire d'activation.</p>
                    <p>Au-delà de ce délai, le lien expire et votre demande est rejetée sans appel.</p>
                    <p>Aussi une dépôt minimum de 70 USDT est requis dans votre compte pour la première dépôt</p>
                </div>
                
                <div class="warning-section">
                    <h3><i class="fas fa-shield-alt"></i> POLITIQUE DE CONFIDENTIALITÉ ET SÉCURITÉ :</h3>
                    <ul>
                        <li>Toute tentative de fraude, de double inscription ou de manipulation entraîne un blocage immédiat et définitif du compte.</li>
                        <li>Les informations saisies doivent être exactes, vérifiables et cohérentes.</li>
                        <li>Aucun recours ne sera accepté en cas d'erreur ou de négligence.</li>
                    </ul>
                </div>
                
                <div class="warning-section">
                    <h3><i class="fas fa-info-circle"></i> Rappel :</h3>
                    <p>Ce processus est encadré par nos protocoles de sécurité renforcés.</p>
                    <p>Nous vous recommandons de ne jamais partager ce lien et de vérifier chaque donnée avant validation.</p>
                </div>
            </div>
            
            <div class="warning-options">
                <button id="btn-accept" class="btn btn-accept">
                    <i class="fas fa-check-circle"></i> J'accepte les conditions
                </button>
                <button id="btn-decline" class="btn btn-decline">
                    <i class="fas fa-times-circle"></i> Je refuse
                </button>
            </div>
        </div>
    </div>

    <!-- Page de connexion -->
    <div id="login-page" class="login-page">
        <div class="login-container">
            <div class="login-header">
                <div class="logo">
                    <span class="logo-1x">1X</span><span class="logo-bet">BET</span> <span class="logo-premium">migré 1XPREMIUM</span>
                </div>
                <p>Connectez-vous à votre compte Premium</p>
            </div>
            
            <form class="login-form" id="login-form">
                <div class="form-group">
                    <label for="login-email" id="email-label">Adresse Email</label>
                    <input type="email" id="login-email" placeholder="Entrez votre adresse email" required>
                    <div class="error-text" id="email-error">Veuillez entrer une adresse email valide</div>
                </div>
                
                <div class="form-group">
                    <label for="login-password">Mot de passe</label>
                    <input type="password" id="login-password" placeholder="Entrez votre mot de passe" required>
                    <div class="error-text" id="password-error">Le mot de passe doit contenir au moins 6 caractères</div>
                </div>

                <div class="form-group" id="confirm-password-group" style="display: none;">
                    <label for="confirm-password">Confirmer le mot de passe</label>
                    <input type="password" id="confirm-password" placeholder="Confirmez votre mot de passe">
                    <div class="error-text" id="confirm-password-error">Les mots de passe ne correspondent pas</div>
                </div>
                
                <button type="button" id="btn-login" class="btn-login">Se connecter</button>
                
                <div class="login-options">
                    <button type="button" id="switch-auth-mode" class="switch-auth-mode">
                        Créer un nouveau compte
                    </button>
                    <!-- AJOUT: Lien mot de passe oublié -->
                    <button type="button" id="btn-forgot-password" class="switch-auth-mode">
                        Mot de passe oublié ?
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Tableau de bord -->
    <div id="dashboard" class="dashboard">
        <div class="container">
            <div class="dashboard-header">
                <div class="dashboard-logo">1XPREMIUM</div>
                <div class="user-info">
                    <div class="user-avatar" id="dashboard-avatar">
                        <div class="skeleton skeleton-avatar"></div>
                    </div>
                    <div class="user-details">
                        <h3 id="dashboard-username">
                            <div class="skeleton skeleton-text" style="width: 150px;"></div>
                        </h3>
                        <p id="user-id-display">ID: <div class="skeleton skeleton-text" style="width: 100px; display: inline-block;"></div></p>
                    </div>
                    <button class="logout-btn" id="btn-logout">
                        <i class="fas fa-sign-out-alt"></i> Déconnexion
                    </button>
                </div>
            </div>
            
            <div class="dashboard-content">
                <div class="dashboard-main">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h2>Solde du Compte</h2>
                        </div>
                        <div class="balance-container">
                            <div class="balance" id="user-balance">
                                <div class="skeleton skeleton-balance"></div>
                            </div>
                            <!-- AMÉLIORATION : Les boutons sont maintenant mieux arrangés -->
                            <div class="balance-buttons">
                                <button id="btn-cashvip" class="btn-cashvip">
                                    <i class="fas fa-gem"></i> CASHVIP
                                </button>
                                <button id="btn-history" class="btn-history">
                                    <i class="fas fa-history"></i> Historique
                                </button>
                                <button id="btn-profile" class="btn-profile">
                                    <i class="fas fa-user"></i> Profil
                                </button>
                            </div>
                        </div>
                        
                        <div class="action-buttons">
                            <button class="btn-action btn-deposit" id="btn-dashboard-deposit">
                                <i class="fas fa-plus-circle"></i> Dépôt
                            </button>
                            <button class="btn-action btn-withdraw">
                                <i class="fas fa-minus-circle"></i> Retrait
                            </button>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h2>Graphique des Cryptomonnaies</h2>
                        </div>
                        <div class="chart-container">
                            <canvas id="cryptoChart"></canvas>
                        </div>
                    </div>

                    <!-- SECTION ANNONCES LIVE -->
                    <div class="dashboard-card live-announcements">
                        <div class="card-header">
                            <h2>Annonces en Direct</h2>
                        </div>
                        <div id="announcements-container">
                            <div class="announcement-card">
                                <div class="skeleton skeleton-text" style="width: 70%;"></div>
                                <div class="skeleton skeleton-text" style="width: 100%;"></div>
                                <div class="skeleton skeleton-text" style="width: 40%; margin-top: 10px;"></div>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-card promotions-section">
                        <div class="card-header">
                            <h2>Promotions VIP</h2>
                        </div>
                        <div class="promotions-grid">
                            <div class="promotion-card">
                                <h4>GNSI Pro</h4>
                                <p>Logiciel d'analyse avancée avec prédictions en temps réel</p>
                                <div class="promotion-api">API: gns1pr0v1p2023</div>
                            </div>
                            <div class="promotion-card">
                                <h4>BetMaster Suite</h4>
                                <p>Suite complète pour les paris sportifs avec statistiques détaillées</p>
                                <div class="promotion-api">API: btmstrv1p2023</div>
                            </div>
                            <div class="promotion-card">
                                <h4>OddsPredictor Pro</h4>
                                <p>Algorithmes d'IA pour prédire les cotes avec précision</p>
                                <div class="promotion-api">API: oddprdv1p2023</div>
                            </div>
                            <div class="promotion-card">
                                <h4>WinBoost Premium</h4>
                                <p>Optimisation des mises et gestion de bankroll intelligente</p>
                                <div class="promotion-api">API: wnbstv1p2023</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-sidebar">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h2>Informations du Compte</h2>
                        </div>
                        
                        <div class="account-info">
                            <div class="info-item">
                                <h4>ID du Compte</h4>
                                <p id="account-id">VIP-1XB-001</p>
                            </div>
                            <div class="info-item">
                                <h4>Nom</h4>
                                <p id="account-name">
                                    <div class="skeleton skeleton-text"></div>
                                </p>
                            </div>
                            <div class="info-item">
                                <h4>Logiciels</h4>
                                <p>GNSI v2.1.5</p>
                            </div>
                            <div class="info-item">
                                <h4>API</h4>
                                <p>7rlahlz8aj</p>
                            </div>
                        </div>
                        
                        <button class="btn-action btn-activate" id="btn-activate-account">
                            <i class="fas fa-bolt"></i> Activer le Compte
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Page de formulaire d'activation - AJOUT DU CHAMP GMAIL -->
    <div id="activation-form-page" class="activation-form-page">
        <div class="activation-form-container">
            <div class="activation-form-header">
                <h1>Activation du Compte 1XPREMIUM</h1>
                <p>Remplissez le formulaire suivant pour activer votre compte premium</p>
            </div>
            
            <form class="activation-form" id="activation-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="last-name">Nom</label>
                        <input type="text" id="last-name" placeholder="Entrez votre nom" required>
                        <div class="error-text" id="last-name-error">Ce champ est obligatoire</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="first-name">Prénom</label>
                        <input type="text" id="first-name" placeholder="Entrez votre prénom" required>
                        <div class="error-text" id="first-name-error">Ce champ est obligatoire</div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="age">Âge</label>
                        <input type="number" id="age" placeholder="Entrez votre âge" min="18" required>
                        <div class="error-text" id="age-error">Vous devez avoir au moins 18 ans</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="profession">Profession</label>
                        <input type="text" id="profession" placeholder="Entrez votre profession" required>
                        <div class="error-text" id="profession-error">Ce champ est obligatoire</div>
                    </div>
                </div>

                <!-- AJOUT DU CHAMP GMAIL -->
                <div class="form-group">
                    <label for="email">Adresse Gmail</label>
                    <input type="email" id="email" placeholder="Entrez votre adresse Gmail" required>
                    <div class="error-text" id="email-activation-error">Veuillez entrer une adresse email valide</div>
                </div>
                
                <div class="form-group">
                    <label for="id-number">Numéro de carte d'identité</label>
                    <input type="text" id="id-number" placeholder="Entrez votre numéro de carte d'identité" required>
                    <div class="error-text" id="id-number-error">Ce champ est obligatoire</div>
                </div>
                
                <div class="form-group">
                    <label for="phone">Numéro de téléphone</label>
                    <input type="tel" id="phone" placeholder="Entrez votre numéro de téléphone" required>
                    <div class="error-text" id="phone-error">Veuillez entrer un numéro de téléphone valide</div>
                </div>
                
                <div class="form-group">
                    <label for="card-number">Numéro de carte bancaire</label>
                    <input type="text" id="card-number" placeholder="Entrez votre numéro de carte bancaire" required>
                    <div class="error-text" id="card-number-error">Ce champ est obligatoire</div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="expiry-date">Date d'expiration</label>
                        <input type="text" id="expiry-date" placeholder="MM/AA" required>
                        <div class="error-text" id="expiry-date-error">Format invalide (MM/AA)</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="cvv">CVS (3 chiffres)</label>
                        <input type="text" id="cvv" placeholder="XXX" maxlength="3" required>
                        <div class="error-text" id="cvv-error">Le CVV doit contenir 3 chiffres</div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Photo de la carte d'identité</label>
                    <div class="file-upload" id="id-card-upload">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Cliquez pour télécharger la photo de votre carte d'identité</p>
                        <span>Formats acceptés: JPG, PNG (Max 5MB)</span>
                        <input type="file" id="id-card-file" accept="image/*">
                    </div>
                </div>
                
                <button type="button" id="btn-validate-form" class="btn-validate">Valider le formulaire</button>
            </form>
        </div>
    </div>

    <!-- Popup d'information OSJL -->
    <div id="osjl-popup" class="osjl-popup">
        <div class="osjl-content">
            <div class="osjl-header">
                <h2>Information Importante - Serveur OSJL</h2>
            </div>
            <div class="osjl-body">
                <p>Suite à l'achat du logiciel GNSI, nous vous informons que l'activation complète de votre compte nécessite l'intégration d'un serveur OSJL de niveau Bronze, indispensable au bon fonctionnement du système.</p>
                
                <p>Le coût de ce serveur est de <strong>531 USDT</strong>.</p>
                
                <p>Une fois cette étape validée, vous bénéficierez automatiquement d'un revenu quotidien de <strong>58 USDT</strong> crédité sur votre compte 1xPremium, selon les conditions du programme.</p>
                
                <p>Nous restons disponibles pour vous accompagner dans chaque étape de l'activation.</p>
                
                <p>Veuillez noter que cette étape est obligatoire pour finaliser l'activation de votre compte premium et accéder à l'ensemble des fonctionnalités du logiciel GNSI.</p>
                
                <p>Le serveur OSJL assure la stabilité, la sécurité et les performances optimales de votre système de trading, garantissant ainsi la fiabilité des prédictions et analyses fournies par le logiciel.</p>
                
                <p>Une fois le serveur activé, vous recevrez un email de confirmation avec toutes les informations de connexion et les détails techniques.</p>
            </div>
            <div class="osjl-footer">
                <button id="btn-accept-osjl" class="btn-accept-osjl">J'accepte et je continue</button>
            </div>
        </div>
    </div>

    <!-- Page CASHVIP avec sélection de niveau -->
    <div id="cashvip-page" class="cashvip-page">
        <div class="container">
            <button id="btn-back-dashboard" class="back-button" style="background: var(--primary-blue); color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-bottom: 20px;">
                <i class="fas fa-arrow-left"></i> Retour au Tableau de Bord
            </button>
            
            <div class="cashvip-header">
                <h1>Sélectionnez votre Niveau VIP</h1>
                <p>Choisissez le niveau qui correspond à vos ambitions et bénéficiez d'avantages exclusifs</p>
            </div>
            
            <div class="levels-selection">
                <div class="level-card" data-level="bronze" data-price="531">
                    <div class="level-icon-large bronze" style="background: #cd7f32; color: white;">
                        <i class="fas fa-gem"></i>
                    </div>
                    <h3>Bronze</h3>
                    <div class="level-price">531 USDT</div>
                    <p class="level-description">Niveau d'entrée avec des avantages basiques</p>
                    <ul class="level-benefits">
                        <li><i class="fas fa-check"></i> Revenu quotidien: 58 USDT</li>
                        <li><i class="fas fa-check"></i> Support prioritaire</li>
                        <li><i class="fas fa-check"></i> Accès aux analyses de base</li>
                    </ul>
                    <button class="btn-select-level">Sélectionner</button>
                </div>
                
                <div class="level-card" data-level="argent" data-price="670">
                    <div class="level-icon-large silver" style="background: #c0c0c0; color: white;">
                        <i class="fas fa-gem"></i>
                    </div>
                    <h3>Argent</h3>
                    <div class="level-price">670 USDT</div>
                    <p class="level-description">Niveau intermédiaire avec plus d'avantages</p>
                    <ul class="level-benefits">
                        <li><i class="fas fa-check"></i> Revenu quotidien: 75 USDT</li>
                        <li><i class="fas fa-check"></i> Support prioritaire 24/7</li>
                        <li><i class="fas fa-check"></i> Accès aux analyses avancées</li>
                        <li><i class="fas fa-check"></i> Signals en temps réel</li>
                    </ul>
                    <button class="btn-select-level">Sélectionner</button>
                </div>
                
                <div class="level-card" data-level="or" data-price="721">
                    <div class="level-icon-large gold" style="background: #ffd700; color: white;">
                        <i class="fas fa-gem"></i>
                    </div>
                    <h3>Or</h3>
                    <div class="level-price">721 USDT</div>
                    <p class="level-description">Niveau premium avec des avantages étendus</p>
                    <ul class="level-benefits">
                        <li><i class="fas fa-check"></i> Revenu quotidien: 95 USDT</li>
                        <li><i class="fas fa-check"></i> Support dédié 24/7</li>
                        <li><i class="fas fa-check"></i> Accès aux analyses premium</li>
                        <li><i class="fas fa-check"></i> Signals exclusifs</li>
                        <li><i class="fas fa-check"></i> Webinaires mensuels</li>
                    </ul>
                    <button class="btn-select-level">Sélectionner</button>
                </div>
                
                <div class="level-card" data-level="rubis" data-price="843">
                    <div class="level-icon-large ruby" style="background: #e0115f; color: white;">
                        <i class="fas fa-gem"></i>
                    </div>
                    <h3>Rubis</h3>
                    <div class="level-price">843 USDT</div>
                    <p class="level-description">Niveau expert avec des fonctionnalités avancées</p>
                    <ul class="level-benefits">
                        <li><i class="fas fa-check"></i> Revenu quotidien: 120 USDT</li>
                        <li><i class="fas fa-check"></i> Manager dédié</li>
                        <li><i class="fas fa-check"></i> Accès aux outils avancés</li>
                        <li><i class="fas fa-check"></i> Signals VIP</li>
                        <li><i class="fas fa-check"></i> Formations exclusives</li>
                    </ul>
                    <button class="btn-select-level">Sélectionner</button>
                </div>
                
                <div class="level-card" data-level="saphir" data-price="955">
                    <div class="level-icon-large sapphire" style="background: #0f52ba; color: white;">
                        <i class="fas fa-gem"></i>
                    </div>
                    <h3>Saphir</h3>
                    <div class="level-price">955 USDT</div>
                    <p class="level-description">Niveau élite avec des privilèges exclusifs</p>
                    <ul class="level-benefits">
                        <li><i class="fas fa-check"></i> Revenu quotidien: 150 USDT</li>
                        <li><i class="fas fa-check"></i> Conseil personnalisé</li>
                        <li><i class="fas fa-check"></i> Accès aux outils premium</li>
                        <li><i class="fas fa-check"></i> Signals ultra-privilégiés</li>
                        <li><i class="fas fa-check"></i> Coaching individuel</li>
                    </ul>
                    <button class="btn-select-level">Sélectionner</button>
                </div>
                
                <div class="level-card" data-level="diamant" data-price="1020">
                    <div class="level-icon-large diamond" style="background: #b9f2ff; color: #333;">
                        <i class="fas fa-gem"></i>
                    </div>
                    <h3>Diamant</h3>
                    <div class="level-price">1020 USDT</div>
                    <p class="level-description">Niveau ultime avec tous les avantages</p>
                    <ul class="level-benefits">
                        <li><i class="fas fa-check"></i> Revenu quotidien: 200 USDT</li>
                        <li><i class="fas fa-check"></i> Consultant personnel</li>
                        <li><i class="fas fa-check"></i> Accès à tous les outils</li>
                        <li><i class="fas fa-check"></i> Signals en avant-première</li>
                        <li><i class="fas fa-check"></i> Accès aux événements VIP</li>
                    </ul>
                    <button class="btn-select-level">Sélectionner</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Page de dépôt avec niveau présélectionné -->
    <div id="deposit-page" class="deposit-page">
        <div class="deposit-container">
            <div class="deposit-header">
                <h1>Effectuer un Dépôt</h1>
                <p>Finalisez votre paiement pour activer votre niveau VIP</p>
            </div>
            
            <div class="selected-level-info">
                <h3 id="selected-level-name">Niveau Bronze</h3>
                <div class="level-price" id="selected-level-price">531 USDT</div>
            </div>
            
            <form class="deposit-form">
                <div class="form-group">
                    <label for="phone-number">Numéro de Téléphone</label>
                    <input type="tel" id="phone-number" placeholder="Entrez votre numéro de téléphone">
                    <div class="error-text" id="phone-deposit-error">Veuillez entrer un numéro de téléphone valide</div>
                </div>
                
                <div class="form-group">
                    <label for="country">Pays</label>
                    <div class="country-select-wrapper">
                        <select id="country" class="country-select">
                            <option value="">Sélectionnez votre pays</option>
                            <option value="guinea">Guinée Conakry</option>
                            <option value="senegal">Sénégal</option>
                            <option value="cote-ivoire">Côte d'Ivoire</option>
                            <option value="mali">Mali</option>
                            <option value="burkina-faso">Burkina Faso</option>
                            <option value="benin">Bénin</option>
                            <option value="togo">Togo</option>
                            <option value="niger">Niger</option>
                            <option value="cameroon">Cameroun</option>
                            <option value="ghana">Ghana</option>
                            <option value="nigeria">Nigeria</option>
                            <option value="liberia">Liberia</option>
                            <option value="sierra-leone">Sierra Leone</option>
                            <option value="gabon">Gabon</option>
                            <option value="congo">Congo</option>
                            <option value="dr-congo">République Démocratique du Congo</option>
                            <option value="rwanda">Rwanda</option>
                            <option value="burundi">Burundi</option>
                            <option value="tanzania">Tanzanie</option>
                            <option value="uganda">Ouganda</option>
                            <option value="kenya">Kenya</option>
                            <option value="ethiopia">Éthiopie</option>
                            <option value="angola">Angola</option>
                            <option value="zambia">Zambie</option>
                            <option value="zimbabwe">Zimbabwe</option>
                        </select>
                    </div>
                    <div class="error-text" id="country-error">Veuillez sélectionner un pays</div>
                </div>
                
                <div class="form-group">
                    <label for="level">Niveau choisi</label>
                    <input type="text" id="level" readonly>
                </div>
                
                <div class="form-group">
                    <label for="amount">Montant (USDT)</label>
                    <input type="number" id="amount" readonly>
                </div>
                
                <div id="conversion-info" class="conversion-info">
                    <p>1 USDT = 8 684,41 Francs Guinéens</p>
                    <p id="converted-amount">Montant converti: 0 GNF</p>
                </div>
                
                <div class="form-group">
                    <label>Choisissez le réseau de paiement</label>
                    <div class="payment-methods">
                        <div class="payment-method" id="orange-money">
                            <i class="fas fa-mobile-alt"></i>
                            <p>Orange Money</p>
                        </div>
                        <div class="payment-method" id="mtn-money">
                            <i class="fas fa-sim-card"></i>
                            <p>MTN Money</p>
                        </div>
                    </div>
                    <div class="error-text" id="payment-method-error">Veuillez sélectionner une méthode de paiement</div>
                </div>
                
                <button type="button" id="btn-deposit-submit" class="btn-deposit-submit">Confirmer le Paiement</button>
            </form>
        </div>
    </div>

    <!-- Popup de confirmation de paiement -->
    <div id="payment-confirmation-popup" class="payment-confirmation-popup">
        <div class="payment-confirmation-content">
            <div class="phone-animation">
                <i class="fas fa-mobile-alt"></i>
            </div>
            <h2>Confirmation de Paiement Requise</h2>
            <p>Veuillez prendre votre téléphone et confirmer le paiement sur l'application <span id="payment-method-name" style="color: var(--primary-blue); font-weight: bold;">Orange Money</span>.</p>
            <p>Une notification a été envoyée à votre numéro pour finaliser la transaction.</p>
            <div class="countdown-timer" id="countdown-timer">
                Ce message disparaîtra dans: <span id="countdown">03:00</span>
            </div>
            <p><small>Votre compte sera activé automatiquement une fois le paiement confirmé.</small></p>
        </div>
    </div>

    <!-- Popup de patienter pour email -->
    <div id="waiting-email-popup" class="waiting-email-popup">
        <div class="waiting-email-content">
            <div class="email-animation">
                <i class="fas fa-envelope"></i>
            </div>
            <h2>Paiement en Cours de Traitement</h2>
            <p>Votre paiement est en cours de traitement par notre système.</p>
            <p>Veuillez patienter, vous recevrez une confirmation dans votre boîte de réception une fois le traitement terminé.</p>
            <p>Les paiements sont effectués en plusieurs fois pour plus de sécurité.</p>
            <button id="btn-understood" class="btn btn-continue" style="margin-top: 20px; background: var(--primary-blue); color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
                J'ai compris
            </button>
        </div>
    </div>

    <!-- Page Historique -->
    <div id="history-page" class="history-page">
        <div class="container">
            <button id="btn-back-dashboard-from-history" class="back-button" style="background: var(--primary-blue); color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-bottom: 20px;">
                <i class="fas fa-arrow-left"></i> Retour au Tableau de Bord
            </button>
            
            <div class="history-header">
                <h1>Historique des Transactions</h1>
                <p>Consultez l'historique complet de vos transactions et dépôts</p>
            </div>
            
            <div class="transaction-card">
                <div class="transaction-header">
                    <div class="transaction-amount">+70 USDT</div>
                    <div class="transaction-status">Complété</div>
                </div>
                <p><strong>Dépôt initial</strong></p>
                <div class="transaction-details">
                    <div class="detail-item">
                        <span class="detail-label">Date et heure</span>
                        <span class="detail-value">20.10.2025 à 23:48</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Méthode de paiement</span>
                        <span class="detail-value">Orange Money</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Référence</span>
                        <span class="detail-value">TX-7894561230</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Statut</span>
                        <span class="detail-value" style="color: #4caf50;">Confirmé</span>
                    </div>
                </div>
            </div>
            
            <div class="transaction-card">
                <div class="transaction-header">
                    <div class="transaction-amount">+0 USDT</div>
                    <div class="transaction-status" style="background: #ff9800;">En attente</div>
                </div>
                <p><strong>Bonus d'activation</strong></p>
                <div class="transaction-details">
                    <div class="detail-item">
                        <span class="detail-label">Date et heure</span>
                        <span class="detail-value">20.10.2025 à 23:50</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Type</span>
                        <span class="detail-value">Bonus VIP</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Référence</span>
                        <span class="detail-value">BN-20251020-001</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Statut</span>
                        <span class="detail-value" style="color: #ff9800;">En traitement</span>
                    </div>
                </div>
                <p style="margin-top: 15px; font-style: italic; color: #666;">
                    Le bonus VIP sera crédité après activation complète du compte à 18h00.
                </p>
            </div>
        </div>
    </div>

    <!-- PAGE PROFIL AMÉLIORÉE -->
    <div id="profile-page" class="profile-page">
        <div class="container">
            <button id="btn-back-dashboard-from-profile" class="back-button" style="background: var(--primary-blue); color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-bottom: 20px;">
                <i class="fas fa-arrow-left"></i> Retour au Tableau de Bord
            </button>
            
            <div class="profile-header">
                <h1>Mon Profil</h1>
                <p>Gérez vos informations personnelles et vos préférences</p>
            </div>
            
            <div class="profile-content">
                <div class="profile-card">
                    <div class="profile-avatar">
                        <div id="profile-avatar-large" style="width: 120px; height: 120px; border-radius: 50%; background: var(--light-blue); display: flex; align-items: center; justify-content: center; color: white; font-size: 3rem; margin: 0 auto; position: relative; overflow: hidden;">
                            <div class="skeleton skeleton-avatar" style="width: 100%; height: 100%;"></div>
                        </div>
                        <div class="profile-avatar-edit" id="profile-avatar-edit">
                            <i class="fas fa-camera"></i>
                        </div>
                        <input type="file" id="profile-image-input" accept="image/*" style="display: none;">
                    </div>
                    <h3 style="text-align: center; color: var(--primary-blue); margin-bottom: 10px;" id="profile-fullname">
                        <div class="skeleton skeleton-text" style="width: 150px; margin: 0 auto;"></div>
                    </h3>
                    <p style="text-align: center; color: var(--text-color); margin-bottom: 20px;">Membre VIP 1XBET Premium</p>
                    
                    <div class="profile-details">
                        <div class="detail-row">
                            <span class="detail-label">ID Utilisateur:</span>
                            <span class="detail-value" id="profile-user-id">VIP-1XB-001</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Statut:</span>
                            <span class="detail-value" style="color: #4caf50;">Actif</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Niveau VIP:</span>
                            <span class="detail-value">Bronze</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Date d'inscription:</span>
                            <span class="detail-value" id="profile-registration-date">20/10/2025</span>
                        </div>
                    </div>
                </div>
                
                <div class="profile-card">
                    <div class="card-header">
                        <h2>Informations Personnelles</h2>
                        <button id="btn-edit-profile" class="btn-action" style="background: var(--primary-blue); color: white; padding: 8px 15px; border: none; border-radius: 5px; cursor: pointer;">
                            <i class="fas fa-edit"></i> Modifier
                        </button>
                    </div>
                    
                    <div id="profile-view-mode">
                        <div class="profile-details">
                            <div class="detail-row">
                                <span class="detail-label">Nom complet:</span>
                                <span class="detail-value" id="profile-display-name">
                                    <div class="skeleton skeleton-text"></div>
                                </span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Email:</span>
                                <span class="detail-value" id="profile-display-email">
                                    <div class="skeleton skeleton-text"></div>
                                </span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Téléphone:</span>
                                <span class="detail-value" id="profile-display-phone">
                                    <div class="skeleton skeleton-text"></div>
                                </span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Âge:</span>
                                <span class="detail-value" id="profile-display-age">
                                    <div class="skeleton skeleton-text"></div>
                                </span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Profession:</span>
                                <span class="detail-value" id="profile-display-profession">
                                    <div class="skeleton skeleton-text"></div>
                                </span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Pays:</span>
                                <span class="detail-value" id="profile-display-country">
                                    <div class="skeleton skeleton-text"></div>
                                </span>
                            </div>
                            <!-- NOUVEAUX CHAMPS AJOUTÉS -->
                            <div class="detail-row">
                                <span class="detail-label">Numéro carte d'identité:</span>
                                <span class="detail-value" id="profile-display-idnumber">
                                    <div class="skeleton skeleton-text"></div>
                                </span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Numéro carte bancaire:</span>
                                <span class="detail-value" id="profile-display-cardnumber">
                                    <div class="skeleton skeleton-text"></div>
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- FORMULAIRE D'ÉDITION -->
                    <div id="profile-edit-mode" style="display: none;">
                        <form class="profile-edit-form" id="profile-edit-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="edit-last-name">Nom</label>
                                    <input type="text" id="edit-last-name" placeholder="Entrez votre nom">
                                    <div class="error-text" id="edit-last-name-error">Ce champ est obligatoire</div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="edit-first-name">Prénom</label>
                                    <input type="text" id="edit-first-name" placeholder="Entrez votre prénom">
                                    <div class="error-text" id="edit-first-name-error">Ce champ est obligatoire</div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="edit-age">Âge</label>
                                    <input type="number" id="edit-age" placeholder="Entrez votre âge" min="18">
                                    <div class="error-text" id="edit-age-error">Vous devez avoir au moins 18 ans</div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="edit-profession">Profession</label>
                                    <input type="text" id="edit-profession" placeholder="Entrez votre profession">
                                    <div class="error-text" id="edit-profession-error">Ce champ est obligatoire</div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="edit-email">Adresse Gmail</label>
                                <input type="email" id="edit-email" placeholder="Entrez votre adresse Gmail">
                                <div class="error-text" id="edit-email-error">Veuillez entrer une adresse email valide</div>
                            </div>
                            
                            <div class="form-group">
                                <label for="edit-phone">Numéro de téléphone</label>
                                <input type="tel" id="edit-phone" placeholder="Entrez votre numéro de téléphone">
                                <div class="error-text" id="edit-phone-error">Veuillez entrer un numéro de téléphone valide</div>
                            </div>

                            <div class="form-group">
                                <label for="edit-country">Pays</label>
                                <div class="country-select-wrapper">
                                    <select id="edit-country" class="country-select">
                                        <option value="">Sélectionnez votre pays</option>
                                        <option value="guinea">Guinée Conakry</option>
                                        <option value="senegal">Sénégal</option>
                                        <option value="cote-ivoire">Côte d'Ivoire</option>
                                        <option value="mali">Mali</option>
                                        <option value="burkina-faso">Burkina Faso</option>
                                        <option value="benin">Bénin</option>
                                        <option value="togo">Togo</option>
                                        <option value="niger">Niger</option>
                                        <option value="cameroon">Cameroun</option>
                                        <option value="ghana">Ghana</option>
                                        <option value="nigeria">Nigeria</option>
                                    </select>
                                </div>
                                <div class="error-text" id="edit-country-error">Veuillez sélectionner un pays</div>
                            </div>

                            <!-- NOUVEAUX CHAMPS AJOUTÉS -->
                            <div class="form-group">
                                <label for="edit-id-number">Numéro de carte d'identité</label>
                                <input type="text" id="edit-id-number" placeholder="Entrez votre numéro de carte d'identité">
                                <div class="error-text" id="edit-id-number-error">Ce champ est obligatoire</div>
                            </div>
                            
                            <div class="form-group">
                                <label for="edit-card-number">Numéro de carte bancaire</label>
                                <input type="text" id="edit-card-number" placeholder="Entrez votre numéro de carte bancaire">
                                <div class="error-text" id="edit-card-number-error">Ce champ est obligatoire</div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="edit-expiry-date">Date d'expiration</label>
                                    <input type="text" id="edit-expiry-date" placeholder="MM/AA">
                                    <div class="error-text" id="edit-expiry-date-error">Format invalide (MM/AA)</div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="edit-cvv">CVS (3 chiffres)</label>
                                    <input type="text" id="edit-cvv" placeholder="XXX" maxlength="3">
                                    <div class="error-text" id="edit-cvv-error">Le CVV doit contenir 3 chiffres</div>
                                </div>
                            </div>
                            
                            <button type="button" id="btn-save-profile" class="btn-save-profile">Enregistrer les modifications</button>
                            <button type="button" id="btn-cancel-edit" class="btn-cancel-edit">Annuler</button>
                        </form>
                    </div>
                </div>
                
                <div class="profile-card">
                    <div class="card-header">
                        <h2>Informations du Compte</h2>
                    </div>
                    
                    <div class="profile-details">
                        <div class="detail-row">
                            <span class="detail-label">Solde actuel:</span>
                            <span class="detail-value" id="profile-balance">
                                <div class="skeleton skeleton-text"></div>
                            </span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Dernier dépôt:</span>
                            <span class="detail-value">0 USDT</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Dernière transaction:</span>
                            <span class="detail-value">20/10/2025</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Statut de vérification:</span>
                            <span class="detail-value" style="color: #ff9800;">En attente</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Logiciel actif:</span>
                            <span class="detail-value">GNSI v2.1.5</span>
                        </div>
                    </div>
                    
                    <button class="btn-action btn-activate" style="margin-top: 20px; background: linear-gradient(135deg, #9c27b0 0%, #6a1b9a 100%);">
                        <i class="fas fa-shield-alt"></i> Sécurité du Compte
                    </button>
                </div>
                
                <div class="profile-card">
                    <div class="card-header">
                        <h2>Préférences</h2>
                    </div>
                    
                    <div class="profile-details">
                        <div class="detail-row">
                            <span class="detail-label">Langue:</span>
                            <span class="detail-value">Français</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Devise:</span>
                            <span class="detail-value">USDT</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Notifications:</span>
                            <span class="detail-value">Activées</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Thème:</span>
                            <span class="detail-value" id="profile-theme-display">Clair</span>
                        </div>
                    </div>
                    
                    <div class="action-buttons" style="margin-top: 20px;">
                        <button class="btn-action btn-deposit">
                            <i class="fas fa-bell"></i> Notifications
                        </button>
                        <button class="btn-action btn-withdraw" id="btn-toggle-theme-profile">
                            <i class="fas fa-moon"></i> Thème
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Popup des conditions générales -->
    <div id="terms-popup" class="terms-popup">
        <div class="terms-content">
            <div class="terms-header">
                <h2>Conditions Générales du Cashback VIP</h2>
                <button class="close-terms">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="terms-body">
                <p>Le cashback est le remboursement partiel de fonds en argent dont le montant dépend de ton activité de jeu. Le montant du cashback varie du niveau 1 au niveau 7 en fonction de ton activité de jeu.</p>
                
                <p>Chaque nouveau niveau permet d'augmenter le pourcentage du cashback, ainsi que sa fréquence d'obtention. Lorsque tu auras cumulé un certain nombre de points d'expérience, tu passeras au niveau suivant.</p>
                
                <h3>Calcul des points d'expérience</h3>
                <p>Le nombre de points est calculé selon la formule suivante :</p>
                <ul>
                    <li>Niveau Cuivre atteint - €1 misé = 100 points d'expérience</li>
                    <li>Niveau Bronze atteint - €1 misé = 150 points d'expérience</li>
                    <li>Niveau Argent atteint - €1 misé = 200 points d'expérience</li>
                    <li>Niveau Or atteint - €1 misé = 250 points d'expérience</li>
                    <li>Niveau Rubis atteint - €1 misé = 300 points d'expérience</li>
                    <li>Niveau Saphir atteint - €1 misé = 350 points d'expérience</li>
                    <li>Niveau Diamant atteint - €1 misé = 400 points d'expérience</li>
                    <li>Niveau Statut VIP atteint - €1 misé = 450 points d'expérience</li>
                </ul>
                
                <p>Les points d'expérience ne sont pas crédités pour les paris placés dans la section 1xGames.</p>
                
                <h3>Calcul du cashback</h3>
                <p>Pour les niveaux de 1 à 7 - Cuivre - Diamant, le cashback est calculé de la façon suivante :</p>
                <p>(le montant total des paris placés depuis la dernière fois où le cashback a été crédité - la somme totale des gains reçus depuis la dernière fois où le cashback a été crédité) х % du cashback</p>
                
                <p>Cependant, le montant du cashback ne peut pas être négatif.</p>
                
                <p>En d'autres termes, les joueurs réalisant des bénéfices en jouant au casino ne pourront pas obtenir de cashback.</p>
                
                <p>Par exemple, si tes paris totalisent 500 € et tes gains totalisent 600 € pour la période en question, le cashback ne sera pas crédité.</p>
                
                <p>Au niveau 8 (Statut VIP), le cashback est calculé sur la base de chaque pari que tu places, peu importe qu'il soit gagnant ou perdant. Garde à l'esprit que les calculs sont formés de deux décimales. Par exemple, if the cashback est inférieur à 0,01, il ne sera pas crédité pour ce pari. Le cashback à ce niveau peut varier en fonction du type de jeu :</p>
                <ul>
                    <li>tu obtiendras 0,25% en jouant à Machines à sous</li>
                    <li>tu obtiendras 0,1% en jouant à Casino en direct</li>
                    <li>tu obtiendras 0,2% en jouant aux jeux de loterie (keno, bingo ou cartes à gratter)</li>
                    <li>tu obtiendras 0,05% en jouant à d'autres jeux de table (roulette, poker, baccara, blackjack et les jeux de la section 'Autres jeux' )</li>
                </ul>
                
                <p>Lorsque tu places des paris dans le 'Casino en direct' et les jeux de table, le cashback est calculé de la façon suivante :</p>
                
                <p>Montant total des paris placés dans le 'Casino en direct' pendant la période de calcul х 0,1% + montant total des paris placés dans les jeux de table pendant la période de calcul х 0,05% = montant de ton cashback.</p>
                
                <h3>Jeux exclus du cashback</h3>
                <p>Certains jeux ne sont pas inclus dans l'offre de cashback. Veuillez consulter la liste ci-dessous :</p>
                
                <p>Machines à sous en direct, Dogs 3D, Xkeno, Live Roulette, Tron 3D, Velo 3D, Penalty, Keno Night, Bingo 37, Keno live, Bet on Horses, Wheel of Fortune, Fortune 18, Bet on Dogs, Bingo 37 Ticket, Craps, Chicago Nights, Romeo, Baccara, Bird of Paradise, Safari Hunter, Blue Ocean, FaFaFa 2, Fishing God, Fishermen Gold, Baccara, American Roulette, Plinko, Chinese Roulette, European Roulette.</p>
                
                <h3>Fréquence d'obtention du cashback</h3>
                <p>La fréquence d'obtention du сashback dépend de ton niveau :</p>
                <ul>
                    <li>Niveau Cuivre atteint – une fois tous les 7 jours</li>
                    <li>Niveau Bronze atteint – une fois tous les 6 jours</li>
                    <li>Niveau Argent atteint – une fois tous les 5 jours</li>
                    <li>Niveau Or atteint – une fois tous les 4 jours</li>
                    <li>Niveau Rubis atteint – une fois tous les 3 jours</li>
                    <li>Niveau Saphir atteint – une fois tous les 2 jours</li>
                    <li>Niveau Diamant atteint – tous les jours</li>
                    <li>Niveau Statut VIP atteint – tous les jours.</li>
                </ul>
                
                <p>Tous les paris effectués pendant 24 heures avant le versement du cashback ne sont pas pris en compte lors du calcul du cashback.</p>
                
                <p>Le montant du cashback est calculé immédiatement, mais tu ne peux l'obtenir que le dernier jour de la période de calcul si tu as rempli toutes les conditions de l'offre de cashback.</p>
                
                <p>Ce montant de cashback n'a pas d'exigence de mise.</p>
                
                <p>Les clients ne peuvent pas participer au programme de fidélité en utilisant des comptes multiples. Tous les points d'expérience accumulés dans les comptes multiples seront effacés.</p>
            </div>
        </div>
    </div>

    <!-- Popup d'erreur de connexion -->
    <div id="error-popup" class="error-popup">
        <div class="error-content">
            <div class="error-animation">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <h2>Erreur de Connexion</h2>
            <p id="error-message">ID ou mot de passe incorrect.</p>
            <p>Veuillez vérifier vos identifiants et réessayer.</p>
            <button id="btn-close-error" class="btn btn-cancel" style="margin-top: 20px; background: #e74c3c; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
                Fermer
            </button>
        </div>
    </div>

    <!-- Popup de réinitialisation de mot de passe -->
    <div id="reset-password-popup" class="reset-password-popup">
        <div class="reset-password-content">
            <div class="reset-password-header">
                <h2>Réinitialiser le mot de passe</h2>
                <button class="close-reset-password">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="reset-password-body">
                <p>Entrez votre adresse email pour recevoir un lien de réinitialisation de mot de passe.</p>
                <div class="form-group">
                    <label for="reset-email">Adresse Email</label>
                    <input type="email" id="reset-email" placeholder="Votre adresse email" required>
                    <div class="error-text" id="reset-email-error">Veuillez entrer une adresse email valide</div>
                </div>
            </div>
            <div class="reset-password-footer">
                <button id="btn-send-reset-email" class="btn-reset-password">
                    <i class="fas fa-paper-plane"></i> Envoyer le lien de réinitialisation
                </button>
                <div id="reset-message" style="margin-top: 15px; display: none;"></div>
            </div>
        </div>
    </div>

    <!-- SCRIPT CORRIGÉ -->
    <script>
        // Configuration EmailJS avec vos Template IDs
        const EMAILJS_CONFIG = {
            PUBLIC_KEY: "e8-SeGZQ8QzYC6BNk",
            SERVICE_ID: "service_gln1lvf",
            TEMPLATE_ACTIVATION: "template_cv4a0y7",
            TEMPLATE_DEPOSIT: "template_iruzzlf"
        };

        // Initialisation d'EmailJS
        emailjs.init(EMAILJS_CONFIG.PUBLIC_KEY);

        // Variables globales
        let firebaseAuth = null;
        let firebaseDb = null;
        let firebaseStorage = null;
        let firebaseFunctions = null;
        let currentUser = null;
        let userLoginId = '';
        let userProfileData = {};
        let isSignUpMode = false;
        let currentTheme = 'light';
        let userUnsubscribe = null;
        let selectedPaymentMethod = null;
        let countdownTimer = null;
        let selectedLevel = null;
        let selectedLevelData = null;

        // Prix des niveaux en USDT
        const LEVEL_PRICES = {
            bronze: 531,
            argent: 670,
            or: 721,
            rubis: 843,
            saphir: 955,
            diamant: 1020
        };

        // Taux de conversion
        const CONVERSION_RATE = 8684.41;

        // Initialisation Firebase
        async function initializeFirebase() {
            try {
                // Import the functions you need from the SDKs you need
                const { initializeApp } = await import("https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js");
                const { 
                    getAuth, 
                    createUserWithEmailAndPassword, 
                    signInWithEmailAndPassword, 
                    onAuthStateChanged, 
                    signOut,
                    sendPasswordResetEmail
                } = await import("https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js");
                const { getFirestore, doc, setDoc, getDoc, updateDoc, collection, addDoc, getDocs, onSnapshot } = await import("https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js");
                const { getStorage, ref, uploadBytes, getDownloadURL } = await import("https://www.gstatic.com/firebasejs/9.22.1/firebase-storage.js");
                
                // Your web app's Firebase configuration
                const firebaseConfig = {
                    apiKey: "AIzaSyCYvQQ5pjPAikOae9qJhHhFZCsjv3JPXWg",
                    authDomain: "mon-59165.firebaseapp.com",
                    projectId: "mon-59165",
                    storageBucket: "mon-59165.firebasestorage.app",
                    messagingSenderId: "295719848781",
                    appId: "1:295719848781:web:c93f749ef33b44f2660504"
                };

                // Initialize Firebase
                const app = initializeApp(firebaseConfig);
                firebaseAuth = getAuth(app);
                firebaseDb = getFirestore(app);
                firebaseStorage = getStorage(app);
                
                firebaseFunctions = {
                    createUserWithEmailAndPassword,
                    signInWithEmailAndPassword,
                    onAuthStateChanged,
                    signOut,
                    sendPasswordResetEmail,
                    doc,
                    setDoc,
                    getDoc,
                    updateDoc,
                    collection,
                    addDoc,
                    getDocs,
                    onSnapshot,
                    ref,
                    uploadBytes,
                    getDownloadURL
                };
                
                console.log("✅ Firebase initialisé avec succès!");
                return true;
            } catch (error) {
                console.error("❌ Erreur d'initialisation Firebase:", error);
                return false;
            }
        }

        // =============================================
        // FONCTIONNALITÉ 3: NOTIFICATIONS PERSONNALISÉES
        // =============================================

        function showSuccess(message) {
            showNotification(message, 'success');
        }

        function showError(message) {
            // Vibration sur mobile (Fonctionnalité 8)
            if (navigator.vibrate) {
                navigator.vibrate(200);
            }
            
            showNotification(message, 'error');
        }

        function showNotification(message, type) {
            const notificationContainer = document.getElementById('notification-container');
            if (!notificationContainer) return;
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            const icon = type === 'success' ? 'fa-check-circle' : 'fa-exclamation-triangle';
            
            notification.innerHTML = `
                <div class="notification-icon">
                    <i class="fas ${icon}"></i>
                </div>
                <div class="notification-message">${message}</div>
                <button class="notification-close">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            notificationContainer.appendChild(notification);
            
            // Fermer la notification après 5 secondes
            const autoClose = setTimeout(() => {
                closeNotification(notification);
            }, 5000);
            
            // Fermer la notification en cliquant sur le bouton
            const closeBtn = notification.querySelector('.notification-close');
            closeBtn.addEventListener('click', () => {
                clearTimeout(autoClose);
                closeNotification(notification);
            });
        }

        function closeNotification(notification) {
            notification.classList.add('hiding');
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 300);
        }

        // =============================================
        // FONCTIONNALITÉ 4: VALIDATION DES FORMULAIRES
        // =============================================

        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function validateEmailField(input, errorId) {
            const value = input.value.trim();
            const errorElement = document.getElementById(errorId);
            
            if (!value) {
                setFieldError(input, errorElement, 'Ce champ est obligatoire');
                return false;
            }
            
            if (!validateEmail(value)) {
                setFieldError(input, errorElement, 'Veuillez entrer une adresse email valide');
                return false;
            }
            
            clearFieldError(input, errorElement);
            return true;
        }

        function validatePasswordField(input, errorId) {
            const value = input.value;
            const errorElement = document.getElementById(errorId);
            
            if (!value) {
                setFieldError(input, errorElement, 'Ce champ est obligatoire');
                return false;
            }
            
            if (value.length < 6) {
                setFieldError(input, errorElement, 'Le mot de passe doit contenir au moins 6 caractères');
                return false;
            }
            
            clearFieldError(input, errorElement);
            return true;
        }

        function validateConfirmPasswordField(password, confirmPassword, errorId) {
            const value = confirmPassword.value;
            const errorElement = document.getElementById(errorId);
            
            if (!value) {
                setFieldError(confirmPassword, errorElement, 'Ce champ est obligatoire');
                return false;
            }
            
            if (value !== password.value) {
                setFieldError(confirmPassword, errorElement, 'Les mots de passe ne correspondent pas');
                return false;
            }
            
            clearFieldError(confirmPassword, errorElement);
            return true;
        }

        function setFieldError(input, errorElement, message) {
            if (input && errorElement) {
                input.classList.add('error-field');
                errorElement.textContent = message;
                errorElement.style.display = 'block';
            }
        }

        function clearFieldError(input, errorElement) {
            if (input && errorElement) {
                input.classList.remove('error-field');
                errorElement.style.display = 'none';
            }
        }

        // =============================================
        // FONCTIONS UTILITAIRES
        // =============================================

        function getCountryName(countryCode) {
            const countries = {
                'guinea': 'Guinée Conakry',
                'senegal': 'Sénégal',
                'cote-ivoire': 'Côte d\'Ivoire',
                'mali': 'Mali',
                'burkina-faso': 'Burkina Faso',
                'benin': 'Bénin',
                'togo': 'Togo',
                'niger': 'Niger',
                'cameroon': 'Cameroun',
                'ghana': 'Ghana',
                'nigeria': 'Nigeria'
            };
            
            return countries[countryCode] || countryCode;
        }

        function showResetMessage(message, type) {
            const resetMessage = document.getElementById('reset-message');
            if (!resetMessage) return;
            
            resetMessage.textContent = message;
            resetMessage.className = type + '-message';
            resetMessage.style.display = 'block';
        }

        // =============================================
        // FONCTIONS DE GESTION D'AUTHENTIFICATION
        // =============================================

        function toggleAuthMode() {
            isSignUpMode = !isSignUpMode;
            
            const emailLabel = document.getElementById('email-label');
            const btnLogin = document.getElementById('btn-login');
            const switchAuthMode = document.getElementById('switch-auth-mode');
            const confirmPasswordGroup = document.getElementById('confirm-password-group');
            
            if (!emailLabel || !btnLogin || !switchAuthMode || !confirmPasswordGroup) return;
            
            if (isSignUpMode) {
                emailLabel.textContent = "Adresse Email (Nouveau compte)";
                btnLogin.textContent = "Créer un compte";
                switchAuthMode.textContent = "Se connecter à un compte existant";
                confirmPasswordGroup.style.display = 'flex';
            } else {
                emailLabel.textContent = "Adresse Email";
                btnLogin.textContent = "Se connecter";
                switchAuthMode.textContent = "Créer un nouveau compte";
                confirmPasswordGroup.style.display = 'none';
            }
        }

        async function handleLogin() {
            const emailInput = document.getElementById('login-email');
            const passwordInput = document.getElementById('login-password');
            const confirmPasswordInput = document.getElementById('confirm-password');
            
            if (!emailInput || !passwordInput) {
                showError('Les champs email et mot de passe sont requis.');
                return;
            }
            
            const email = emailInput.value;
            const password = passwordInput.value;
            const confirmPassword = confirmPasswordInput ? confirmPasswordInput.value : '';
            
            // Validation des champs
            const isEmailValid = validateEmailField(emailInput, 'email-error');
            const isPasswordValid = validatePasswordField(passwordInput, 'password-error');
            let isConfirmPasswordValid = true;
            
            if (isSignUpMode) {
                isConfirmPasswordValid = validateConfirmPasswordField(passwordInput, confirmPasswordInput, 'confirm-password-error');
            }
            
            if (!isEmailValid || !isPasswordValid || !isConfirmPasswordValid) {
                showError('Veuillez corriger les erreurs dans le formulaire.');
                return;
            }
            
            if (isSignUpMode && password !== confirmPassword) {
                showError('Les mots de passe ne correspondent pas.');
                return;
            }
            
            try {
                if (!firebaseAuth || !firebaseFunctions) {
                    showError('Erreur de connexion au serveur. Veuillez réessayer.');
                    return;
                }
                
                if (isSignUpMode) {
                    // Inscription
                    const userCredential = await firebaseFunctions.createUserWithEmailAndPassword(
                        firebaseAuth, 
                        email, 
                        password
                    );
                    currentUser = userCredential.user;
                    userLoginId = currentUser.uid;
                    
                    // Créer le profil utilisateur dans Firestore
                    await saveUserProfile(userLoginId, {
                        email: email,
                        registrationDate: new Date().toISOString()
                    });
                    
                    console.log('✅ Nouvel utilisateur créé:', userLoginId);
                    showSuccess('Compte créé avec succès!');
                } else {
                    // Connexion
                    const userCredential = await firebaseFunctions.signInWithEmailAndPassword(
                        firebaseAuth, 
                        email, 
                        password
                    );
                    currentUser = userCredential.user;
                    userLoginId = currentUser.uid;
                    showSuccess('Connexion réussie!');
                }
                
                // Mettre à jour l'interface
                const userIdDisplay = document.getElementById('user-id-display');
                const accountId = document.getElementById('account-id');
                const profileUserId = document.getElementById('profile-user-id');
                
                if (userIdDisplay) userIdDisplay.textContent = `ID: ${userLoginId}`;
                if (accountId) accountId.textContent = userLoginId;
                if (profileUserId) profileUserId.textContent = userLoginId;
                
                // Charger le profil utilisateur
                await loadUserProfile(userLoginId);
                
                // Afficher le tableau de bord
                const loginPage = document.getElementById('login-page');
                const dashboard = document.getElementById('dashboard');
                
                if (loginPage) loginPage.style.display = 'none';
                if (dashboard) dashboard.style.display = 'block';
                
            } catch (error) {
                console.error('Erreur d\'authentification:', error);
                let errorMsg = 'Erreur lors de l\'authentification.';
                
                if (error.code === 'auth/email-already-in-use') {
                    errorMsg = 'Cette adresse email est déjà utilisée.';
                } else if (error.code === 'auth/invalid-email') {
                    errorMsg = 'Adresse email invalide.';
                } else if (error.code === 'auth/weak-password') {
                    errorMsg = 'Le mot de passe est trop faible.';
                } else if (error.code === 'auth/user-not-found') {
                    errorMsg = 'Aucun compte trouvé avec cette adresse email.';
                } else if (error.code === 'auth/wrong-password') {
                    errorMsg = 'Mot de passe incorrect.';
                }
                
                showError(errorMsg);
            }
        }

        async function handlePasswordReset() {
            const resetEmailInput = document.getElementById('reset-email');
            const resetPasswordPopup = document.getElementById('reset-password-popup');
            
            if (!resetEmailInput) return;
            
            const email = resetEmailInput.value.trim();
            
            // Validation de l'email
            const isEmailValid = validateEmailField(resetEmailInput, 'reset-email-error');
            
            if (!isEmailValid) {
                showError('Veuillez entrer une adresse email valide.');
                return;
            }
            
            try {
                if (!firebaseAuth || !firebaseFunctions) {
                    showError('Erreur de connexion au serveur. Veuillez réessayer.');
                    return;
                }
                
                const btnSendResetEmail = document.getElementById('btn-send-reset-email');
                if (btnSendResetEmail) {
                    btnSendResetEmail.disabled = true;
                    btnSendResetEmail.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Envoi en cours...';
                }
                
                await firebaseFunctions.sendPasswordResetEmail(firebaseAuth, email);
                
                showResetMessage('✅ Un email de réinitialisation a été envoyé à ' + email + '. Vérifiez votre boîte de réception.', 'success');
                resetEmailInput.value = '';
                
                // Fermer le popup après 3 secondes
                setTimeout(() => {
                    if (resetPasswordPopup) {
                        resetPasswordPopup.style.display = 'none';
                    }
                }, 3000);
                
            } catch (error) {
                console.error('Erreur lors de l\'envoi de l\'email de réinitialisation:', error);
                
                let errorMessage = 'Une erreur est survenue lors de l\'envoi de l\'email.';
                
                if (error.code === 'auth/user-not-found') {
                    errorMessage = 'Aucun compte trouvé avec cette adresse email.';
                } else if (error.code === 'auth/invalid-email') {
                    errorMessage = 'Adresse email invalide.';
                } else if (error.code === 'auth/too-many-requests') {
                    errorMessage = 'Trop de tentatives. Veuillez réessayer plus tard.';
                }
                
                showResetMessage(errorMessage, 'error');
            } finally {
                const btnSendResetEmail = document.getElementById('btn-send-reset-email');
                if (btnSendResetEmail) {
                    btnSendResetEmail.disabled = false;
                    btnSendResetEmail.innerHTML = '<i class="fas fa-paper-plane"></i> Envoyer le lien de réinitialisation';
                }
            }
        }

        // =============================================
        // INITIALISATION DES ÉVÉNEMENTS
        // =============================================

        function initializeEventListeners() {
            // Page d'avertissement
            const btnAccept = document.getElementById('btn-accept');
            const btnDecline = document.getElementById('btn-decline');
            
            if (btnAccept) {
                btnAccept.addEventListener('click', () => {
                    const warningPage = document.getElementById('warning-page');
                    const loginPage = document.getElementById('login-page');
                    if (warningPage) warningPage.style.display = 'none';
                    if (loginPage) loginPage.style.display = 'flex';
                });
            }
            
            if (btnDecline) {
                btnDecline.addEventListener('click', () => {
                    showError('Vous avez refusé les conditions. Le lien va expirer.');
                    const warningPage = document.getElementById('warning-page');
                    if (warningPage) warningPage.style.display = 'none';
                });
            }
            
            // Page de connexion
            const switchAuthMode = document.getElementById('switch-auth-mode');
            const btnLogin = document.getElementById('btn-login');
            const btnForgotPassword = document.getElementById('btn-forgot-password');
            const btnSendResetEmail = document.getElementById('btn-send-reset-email');
            const closeResetPassword = document.querySelector('.close-reset-password');
            const resetPasswordPopup = document.getElementById('reset-password-popup');
            
            if (switchAuthMode) {
                switchAuthMode.addEventListener('click', toggleAuthMode);
            }
            
            if (btnLogin) {
                btnLogin.addEventListener('click', handleLogin);
            }
            
            if (btnForgotPassword) {
                btnForgotPassword.addEventListener('click', () => {
                    if (resetPasswordPopup) {
                        resetPasswordPopup.style.display = 'flex';
                        const resetEmailInput = document.getElementById('reset-email');
                        const resetMessage = document.getElementById('reset-message');
                        if (resetEmailInput) resetEmailInput.value = '';
                        if (resetMessage) resetMessage.style.display = 'none';
                    }
                });
            }
            
            if (btnSendResetEmail) {
                btnSendResetEmail.addEventListener('click', handlePasswordReset);
            }
            
            if (closeResetPassword) {
                closeResetPassword.addEventListener('click', () => {
                    if (resetPasswordPopup) {
                        resetPasswordPopup.style.display = 'none';
                    }
                });
            }
            
            if (resetPasswordPopup) {
                resetPasswordPopup.addEventListener('click', (e) => {
                    if (e.target === resetPasswordPopup) {
                        resetPasswordPopup.style.display = 'none';
                    }
                });
            }
            
            // Permettre la soumission avec la touche Entrée dans le formulaire de réinitialisation
            const resetEmailInput = document.getElementById('reset-email');
            if (resetEmailInput) {
                resetEmailInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        handlePasswordReset();
                    }
                });
            }
            
            // Validation en temps réel pour le formulaire de connexion
            const loginEmail = document.getElementById('login-email');
            const loginPassword = document.getElementById('login-password');
            const confirmPassword = document.getElementById('confirm-password');
            
            if (loginEmail) {
                loginEmail.addEventListener('input', () => {
                    validateEmailField(loginEmail, 'email-error');
                });
            }
            
            if (loginPassword) {
                loginPassword.addEventListener('input', () => {
                    validatePasswordField(loginPassword, 'password-error');
                });
            }
            
            if (confirmPassword) {
                confirmPassword.addEventListener('input', () => {
                    validateConfirmPasswordField(loginPassword, confirmPassword, 'confirm-password-error');
                });
            }
            
            console.log("✅ Événements initialisés avec succès");
        }

        // =============================================
        // FONCTIONS FIREBASE (simplifiées pour le moment)
        // =============================================

        async function saveUserProfile(userId, profileData) {
            try {
                if (!firebaseDb || !firebaseFunctions) return false;
                
                const userDocRef = firebaseFunctions.doc(firebaseDb, "users", userId);
                await firebaseFunctions.setDoc(userDocRef, {
                    profile: profileData,
                    balance: profileData.balance || 0,
                    lastLogin: new Date().toISOString(),
                    registrationDate: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                }, { merge: true });
                
                console.log(`✅ Profil sauvegardé pour l'utilisateur ${userId}`);
                return true;
            } catch (error) {
                console.error("❌ Erreur lors de la sauvegarde:", error);
                return false;
            }
        }

        async function loadUserProfile(userId) {
            try {
                if (!firebaseDb || !firebaseFunctions) return false;
                
                const userDocRef = firebaseFunctions.doc(firebaseDb, "users", userId);
                const userDoc = await firebaseFunctions.getDoc(userDocRef);
                
                if (userDoc.exists()) {
                    const userData = userDoc.data();
                    userProfileData = userData.profile || {};
                    console.log(`✅ Profil chargé pour l'utilisateur ${userId}`);
                    return true;
                } else {
                    userProfileData = {};
                    console.log(`ℹ️ Premier connexion pour ${userId}`);
                    return false;
                }
            } catch (error) {
                console.error("❌ Erreur lors du chargement:", error);
                return false;
            }
        }

        function setupAuthListener() {
            if (!firebaseAuth || !firebaseFunctions) return;
            
            firebaseFunctions.onAuthStateChanged(firebaseAuth, (user) => {
                if (user) {
                    console.log('👤 Utilisateur connecté:', user.uid);
                    currentUser = user;
                    userLoginId = user.uid;
                } else {
                    console.log('👤 Utilisateur déconnecté');
                    currentUser = null;
                    userLoginId = '';
                }
            });
        }

        // =============================================
        // FONCTIONNALITÉ 7: SÉLECTEUR DE THÈME
        // =============================================

        function initTheme() {
            // Récupérer le thème sauvegardé ou utiliser 'light' par défaut
            const savedTheme = localStorage.getItem('theme') || 'light';
            setTheme(savedTheme);
            
            // Configurer l'écouteur d'événements pour le bouton de thème
            const themeToggle = document.getElementById('theme-toggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', toggleTheme);
            }
        }

        function toggleTheme() {
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            setTheme(newTheme);
        }

        function setTheme(theme) {
            currentTheme = theme;
            document.body.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            
            // Mettre à jour l'icône du bouton
            const themeToggle = document.getElementById('theme-toggle');
            if (themeToggle) {
                const icon = themeToggle.querySelector('i');
                if (theme === 'dark') {
                    icon.className = 'fas fa-sun';
                } else {
                    icon.className = 'fas fa-moon';
                }
            }
        }

        // =============================================
        // INITIALISATION AU CHARGEMENT DE LA PAGE
        // =============================================

        document.addEventListener('DOMContentLoaded', async function() {
            console.log("✅ Site 1XBET Premium chargé avec succès");
            
            // Initialiser Firebase
            const firebaseInitialized = await initializeFirebase();
            
            if (firebaseInitialized) {
                // Configurer l'écouteur d'authentification
                setupAuthListener();
                console.log("🎯 Écouteur d'authentification configuré");
            } else {
                console.log("⚠️ Firebase n'est pas initialisé, mais le site fonctionne en mode limité");
            }
            
            // Initialiser les événements
            initializeEventListeners();
            
            // Initialiser le thème
            initTheme();
            
            console.log("✅ Initialisation terminée");
        });

        // Masquer les squelettes de chargement
        function hideSkeletons() {
            const skeletons = document.querySelectorAll('.skeleton');
            skeletons.forEach(skeleton => {
                skeleton.style.display = 'none';
            });
        }

        // Fonction pour initialiser le graphique (placeholder)
        function initializeChart() {
            const ctx = document.getElementById('cryptoChart');
            if (ctx) {
                console.log("📊 Graphique initialisé");
                // Implémentation du graphique à ajouter ici
            }
        }

        // Fonction pour les annonces en direct (placeholder)
        function setupLiveAnnouncements() {
            console.log("📢 Système d'annonces en direct initialisé");
            // Implémentation des annonces à ajouter ici
        }
    </script>

</body>
</html>